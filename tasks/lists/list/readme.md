# –î–≤—É—Å–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫

–í —ç—Ç–æ–π –∑–∞–¥–∞—á–µ –Ω–∞–ø–∏—à–µ–º —Å–≤–æ–π [std::list](https://en.cppreference.com/w/cpp/container/list).

---

*–î–≤—É—Å–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫* ‚Äì —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∞—è —Å–æ–±–æ–π —Å–≤—è–∑–∞–Ω–Ω—ã–µ –¥—Ä—É–≥ –∑–∞ –¥—Ä—É–≥–æ–º —É–∑–ª—ã. –î–≤—É—Å–≤—è–∑–Ω—ã–π –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Å–≤—è–∑—å `–¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è` - —Ç–µ–∫—É—â–∏–π —É–∑–µ–ª —Å–≤—è–∑–∞–Ω —Å —Å–ª–µ–¥—É—é—â–∏–º –∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–º.</br>
![Alt text](./images/image-1.png)

**–û–±–ª–∞–¥–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–º–∏ —Å–≤–æ–π—Å—Ç–≤–∞–º–∏:**
- –í—Å—Ç–∞–≤–∫–∞ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞ O(1).
- –ü–æ–∏—Å–∫ —ç–ª–µ–º–µ–Ω—Ç–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞ O(N).
- –£–¥–∞–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–∞ –∑–∞ O(1).

## –ü—Ä–æ—Å—Ç—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
```C++
// –í—Å—Ç–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç –≤ –∫–æ–Ω–µ—Ü
void PushBack(const T&);

// –í—Å—Ç–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç –≤ –Ω–∞—á–∞–ª–æ
void PushFront(const T&);

// –£–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç –∏–∑ –∫–æ–Ω—Ü–∞
void PopBack();

// –£–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç –∏–∑ –Ω–∞—á–∞–ª–∞
void PopFront();

// –ü–æ–º–µ–Ω—è—Ç—å –º–µ—Å—Ç–∞–º–∏ –¥–≤–∞ —Å–ø–∏—Å–∫–∞
void Swap(List&);

// True –µ—Å–ª–∏ —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç–æ–π
bool IsEmpty();

// –í–µ—Ä–Ω—É—Ç—å –∫–æ–ª-–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Å–ø–∏—Å–∫–∞
size_t Size();

// –í–µ—Ä–Ω—É—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–µ—Ä–≤–æ–≥–æ —É–∑–ª–∞
T& Front();

// –í–µ—Ä–Ω—É—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —É–∑–ª–∞
T& Back();
```

## –ò—Ç–µ—Ä–∞—Ç–æ—Ä—ã

[–ò—Ç–µ—Ä–∞—Ç–æ—Ä](https://refactoring.guru/design-patterns/iterator) - —ç—Ç–æ —à–∞–±–ª–æ–Ω –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è –ø–æ —ç–ª–µ–º–µ–Ω—Ç–∞–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞—è –µ–≥–æ –±–∞–∑–æ–≤–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ (—Å–ø–∏—Å–æ–∫, —Å—Ç–µ–∫, –¥–µ—Ä–µ–≤–æ –∏ —Ç. –¥.).

### ‚òπÔ∏è–ü—Ä–æ–±–ª–µ–º–∞
![Alt text](./images/ds.png)
–í –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –µ—Å—Ç—å –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö. –ò–Ω–æ–≥–¥–∞ —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –º–∞—Å—Å–∏–≤, –∏–Ω–æ–≥–¥–∞ —Å–ø–∏—Å–æ–∫. –ê –±—ã–≤–∞—é—Ç –∏ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ: –¥–µ—Ä–µ–≤—å—è, –≥—Ä–∞—Ñ—ã, —Å—Ç–µ–∫.

–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –≤—Å—ë —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä, –Ω–∞–º –Ω—É–∂–Ω–æ –∫–∞–∫-—Ç–æ –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ —ç–ª–µ–º–µ–Ω—Ç–∞–º. –ü—Ä–∏ —ç—Ç–æ–º —Ö–æ—á–µ—Ç—Å—è –ø–æ–ª—É—á–∞—Ç—å –¥–æ—Å—Ç—É–ø –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —ç–ª–µ–º–µ–Ω—Ç—É, –Ω–µ –æ–±—Ä–∞—â–∞—è—Å—å —Å–Ω–æ–≤–∞ –∏ —Å–Ω–æ–≤–∞ –∫ –ø—Ä–µ–¥—ã–¥—É—â–∏–º.

### üòä–†–µ—à–µ–Ω–∏–µ

–û—Å–Ω–æ–≤–Ω–∞—è –∏–¥–µ—è —à–∞–±–ª–æ–Ω–∞ ¬´–ò—Ç–µ—Ä–∞—Ç–æ—Ä¬ª –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –≤—ã–¥–µ–ª–µ–Ω–∏–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è –æ–±—Ö–æ–¥–∞ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç, –Ω–∞–∑—ã–≤–∞–µ–º—ã–π `–∏—Ç–µ—Ä–∞—Ç–æ—Ä–æ–º`.

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –¥—É–º–∞–µ—Ç –æ —Ç–æ–º, –∫–∞–∫ —É—Å—Ç—Ä–æ–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–¥ –Ω–∏–º, –∞ –∏–º–µ–µ—Ç –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä–µ–π—Å –∫ –ø–æ–ª—É—á–µ–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö –∏ `–∏—Ç–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏—é` –ø–æ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.

### –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å

```C++
template <typename Node>
class ListIterator {
public:
    // –°—Ä–∞–≤–Ω–∏—Ç—å –Ω–∞ —Ä–∞–≤–µ–Ω—Å—Ç–≤–æ –¥–≤–∞ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞
    bool operator==(const ListIterator&);

    // –°—Ä–∞–≤–Ω–∏—Ç—å –Ω–∞ –Ω–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤–æ –¥–≤–∞ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞
    bool operator!=(const ListIterator&);

    // –ü–æ–ª—É—á–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π Node
    typename Node::value_type& operator*();

    // –ü—Ä–æ–∏—Ç–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤–ø–µ—Ä—ë–¥ –Ω–∞ –æ–¥–∏–Ω —à–∞–≥
    ListIterator& operator++();

    // –ü—Ä–µ—Ñ–∏–∫—Å–Ω–∞—è –≤–µ—Ä—Å–∏—è
    ListIterator operator++(int); 

    // –ü—Ä–æ–∏—Ç–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞–∑–∞–¥ –Ω–∞ –æ–¥–∏–Ω —à–∞–≥
    ListIterator& operator--();

    // –ü—Ä–µ—Ñ–∏–∫—Å–Ω–∞—è –≤–µ—Ä—Å–∏—è
    ListIterator operator--(int);

private:
    ListIterator(const Node*);
    /*The overload of operator -> must either return a raw pointer, 
    or return an object (by reference or by value) for which 
    operator -> is in turn overloaded.*/
    typename Node::value_type* operator->();
private:
    Node* current;
};

```

### –£–∫–∞–∑–∞–Ω–∏—è –ø–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–ü—Ä–æ—á—Ç–∏—Ç–µ –æ —Ç–æ–º, [–∫–∞–∫ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã](https://en.cppreference.com/w/cpp/language/operators) –≤ C++.

–î—É–º–∞–π—Ç–µ –æ–± –æ–ø–µ—Ä–∞—Ç–æ—Ä–µ –∫–∞–∫ –æ –æ–±—ã—á–Ω–æ–º –º–µ—Ç–æ–¥–µ –∫–ª–∞—Å—Å–∞.

[Writing a custom iterator in modern C++](https://www.internalpointers.com/post/writing-custom-iterators-modern-cpp)

## –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ –≤ —Å–ø–∏—Å–∫–µ

![Alt text](./images/image.png)

- `ListIterator<Node> Begin()` - –í–µ—Ä–Ω—É—Ç—å –∏—Ç–µ—Ä–∞—Ç–æ—Ä –Ω–∞ –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç.

- `ListIterator<Node> End()` - –í–µ—Ä–Ω—É—Ç—å –∏—Ç–µ—Ä–∞—Ç–æ—Ä `—Å–ª–µ–¥—É—é—â–∏–π –ø–æ—Å–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç`. –°–º. –∫–∞—Ä—Ç–∏–Ω–∫—É –≤—ã—à–µ

- `void Erase(ListIterator<Node>)` - –£–¥–∞–ª–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç –ø–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–º—É –∏—Ç–µ—Ä–∞—Ç–æ—Ä—É.

- `void Insert(ListIterator<Node>, const T&)` - –í—Å—Ç–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –¥–æ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞.

## –ó–∞–¥–∞–Ω–∏–µ

–†–µ–∞–ª–∏–∑—É–π—Ç–µ [—Å–ø–∏—Å–æ–∫](list.hpp) –∏ [–∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã](iterator.hpp) –∫ –Ω–µ–º—É.

### –£–∫–∞–∑–∞–Ω–∏—è –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

–ß—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å –æ–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ [—Ç–µ—Å—Ç—ã](tests/unit.cpp).

**–í –ø—É–±–ª–∏—á–Ω–æ–µ API –Ω–µ —Å—Ç–æ–∏—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤!**

**–í –ø—É–±–ª–∏—á–Ω–æ–º API –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫–ª–∞—Å—Å–∞ `Node`!** 

`std::initializer_list` –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ —ç–ª–µ–º–µ–Ω—Ç–æ–≤</br>
[How to create a constructor initialized with a list?](https://stackoverflow.com/questions/21869208/how-to-create-a-constructor-initialized-with-a-list)

–°—Ç—Ä–æ–∫–∏ `friend class ListIterator<Node>` –æ–∑–Ω–∞—á–∞—é—Ç, —á—Ç–æ –∫–ª–∞—Å—Å `ListIterator<Node>` –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –ø–æ–ª—è–º –∏ –º–µ—Ç–æ–¥–∞–º —Ç–µ–∫—É—â–µ–≥–æ –∫–ª–∞—Å—Å–∞, —Ç.–µ. —è–≤–ª—è–µ—Ç—Ç—Å—è –µ–≥–æ [–¥—Ä—É–≥–æ–º](https://en.cppreference.com/w/cpp/language/friend)

## References
- [Iterator pattern](https://refactoring.guru/design-patterns/iterator)
- [To Be or Not to Be (an Iterator)](https://ericniebler.com/2015/01/28/to-be-or-not-to-be-an-iterator/)

## –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ

–í –°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç–µ —Å—Ä–∞–≤–Ω–∏—Ç—Å—è –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏ –≤–∞—à–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å `std::list`.